# TODO

completely replace photos-backend (python) with this:

1. ✅ Make python server with endpoints for:
    * ✅ batch generate thumbnails
    * ✅ process single image to json data
2. ✅ HOW DOES PGVECTGOR WORK??? CHANGE TO NON -rs version???
3. Make tables (migrations) in loco for all data generated by process single imagke
    * ✅ make all sub tables
    * ✅ challenge: enable pgvecto-rs extension and create the vector columns and indices (probably just raw sql it)
    * ✅ Make visual-information-model
    * ✅ make image_data migration with data_url, width/height/format etc.
    * ✅ add references for users table
4. ✅ Fix clippy
5. ✅ Fix tests.
6. Implement find_unprocessed_photos worker
    1. ✅ get list of photos in folder
    2. ✅ get photos list from db
    3. ✅ for every photo in folder check if it needs processing
        1. ✅ it needs processing if: has all thumbnails and is in db
    4. ✅ make list of photos that need processing
    5. todo: check for thumbnails in find_unprocessed_photos
7. ✅ Reduce duplicate code in analyze_api and thumbnails_api
8. ✅ Improve error logging for errors in api.
9. only allow register if no user exists, or if a valid invite token is passed
10. Make frontend for user stuff so i can have a user when analyze->storing photos.
11. i dont think i care about magic links, they can go
12. figure out if email works
13. separate thumbnail check -> generate from db image check -> generate
14. fix weather in db (it's now int I want string)
15. after processing photos per user:
    * run recluster worker job
    * clean up dangling thumbnails, db entries, etc.
    * fill timezone gaps
16. add something like watchdog for rust, watch for new files in directory https://docs.rs/notify/latest/notify/
17. add random image + theme endpoint
18. add endpoint to get images by month range
19. make worker job to cluster images